<html>
<head>
  <title>INFINITE TRAILER</title>
  <style>
    #trailer {
      display: table;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      height: 100%;
      position: absolute;
      margin: auto;
    }
  </style>
</head>
<body style="background-color: black;">
  <video id="trailer" width="100%" onended="nextVideo()"></video>
<script>

var videoPlayer = document.getElementById('trailer');

var videos = null;

function nextVideo() {
  var randomIndex = Math.floor(Math.random() * videos.length);
  randomVideoSrc = videos[randomIndex];
  videoPlayer.src = randomVideoSrc;
  videoPlayer.controls = false;
  videoPlayer.play();
}

var req = new XMLHttpRequest();
req.overrideMimeType('application/json');
req.open('GET', 'listings.json', true);
req.onreadystatechange = function(request, url) {
  if (req.readyState == 4) {
    if (req.status == 200) {
      console.log(req.responseText);
      videos = JSON.parse(req.responseText).videos;
      nextVideo();
    }
  }
};
req.send(null);

</script>
</body>
</html>
